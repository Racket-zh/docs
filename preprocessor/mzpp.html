<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>2&nbsp;mzpp</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x"><span class="stt">mzpp</span> and <span class="stt">mztext</span>:<span class="mywbr"> &nbsp;</span> Preprocessors</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x"><span class="stt">mzpp</span></a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="mztext.html" class="tocviewlink" data-pltdoc="x"><span class="stt">mztext</span></a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x"><span class="stt">mzpp</span></a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#%28part._.Invoking_mzpp%29" class="tocviewlink" data-pltdoc="x">Invoking mzpp</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#%28part._mzpp_files%29" class="tocviewlink" data-pltdoc="x">mzpp files</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="#%28part._.Raw_preprocessing_directives%29" class="tocviewlink" data-pltdoc="x">Raw preprocessing directives</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="#%28part._.The_mzpp_read-eval-print_loop%29" class="tocviewlink" data-pltdoc="x">The mzpp read-<wbr></wbr>eval-<wbr></wbr>print loop</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="#%28part._mzpp-lib%29" class="tocviewlink" data-pltdoc="x">Provided bindings</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">在本页中：</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Invoking_mzpp%29" class="tocsubseclink" data-pltdoc="x">Invoking mzpp</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._mzpp_files%29" class="tocsubseclink" data-pltdoc="x">mzpp files</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._.Raw_preprocessing_directives%29" class="tocsubseclink" data-pltdoc="x">Raw preprocessing directives</a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#%28part._.The_mzpp_read-eval-print_loop%29" class="tocsubseclink" data-pltdoc="x">The mzpp read-<wbr></wbr>eval-<wbr></wbr>print loop</a></td></tr><tr><td><span class="tocsublinknumber">2.5<tt>&nbsp;</tt></span><a href="#%28part._mzpp-lib%29" class="tocsubseclink" data-pltdoc="x">Provided bindings</a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._preprocess%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preprocess</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._skip-to%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">skip-<wbr></wbr>to</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._debug~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">debug?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._no-spaces~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">no-<wbr></wbr>spaces?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._beg-mark%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">beg-<wbr></wbr>mark</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._end-mark%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">end-<wbr></wbr>mark</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._push-indentation%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">push-<wbr></wbr>indentation</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._pop-indentation%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pop-<wbr></wbr>indentation</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._show%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">show</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._newline%2A%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">newline*</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._include%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">include</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._stdin%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">stdin</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._stdout%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">stdout</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._stderr%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">stderr</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._cd%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">cd</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._current-file%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>file</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._preprocessor%2Fmzpp..rkt%29._thunk%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">thunk</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="…搜索手册…" title="输入搜索字符串以搜索手册" onkeypress="return DoSearchKey(event, this, &quot;7.0.0.18&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;…搜索手册…&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;…搜索手册…&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="上至文档的顶层" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.0.0.18&quot;);">&#39030;&#23618;</a></span><span class="navright">&nbsp;&nbsp;<a href="overview.html" title="后退至&quot;1 Overview&quot;" data-pltdoc="x">&larr; &#21069;&#19968;&#39029;</a>&nbsp;&nbsp;<a href="index.html" title="上至&quot;mzpp and mztext: Preprocessors&quot;" data-pltdoc="x">&#19978;&#19968;&#23618;</a>&nbsp;&nbsp;<a href="mztext.html" title="前进至&quot;3 mztext&quot;" data-pltdoc="x">&#21518;&#19968;&#39029; &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;preprocessor/scribblings/preprocessor.scrbl&quot;)" x-source-pkg="preprocessor" x-part-tag="&quot;mzpp&quot;">2<tt>&nbsp;</tt><a name="(part._mzpp)"></a><span class="stt">mzpp</span></h3><p><span class="stt">mzpp</span> is a simple preprocessor that allows mixing Racket code with text
files in a similar way to PHP or BRL.  Processing of input files works
by translating the input file to Racket code that prints the contents,
except for marked portions that contain Racket code.  The Racket parts
of a file are marked with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;&lt;</span><span class="hspace"></span></span> and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&gt;&gt;</span><span class="hspace"></span></span> tokens by default.  The
Racket code is then passed through a read-eval-print loop that is similar to a
normal REPL with a few differences in how values are printed.</p><h4 x-source-module="(lib &quot;preprocessor/scribblings/preprocessor.scrbl&quot;)" x-source-pkg="preprocessor" x-part-tag="&quot;Invoking_mzpp&quot;">2.1<tt>&nbsp;</tt><a name="(part._.Invoking_mzpp)"></a>Invoking mzpp</h4><p>Use the <span class="nobreak"><span class="stt">--h</span></span> flag to get the available flags.  See above for an
explanation of the <span class="nobreak"><span class="stt">--run</span></span> flag.</p><h4 x-source-module="(lib &quot;preprocessor/scribblings/preprocessor.scrbl&quot;)" x-source-pkg="preprocessor" x-part-tag="&quot;mzpp_files&quot;">2.2<tt>&nbsp;</tt><a name="(part._mzpp_files)"></a>mzpp files</h4><p>Here is a sample file that <span class="stt">mzpp</span> can process, using the default beginning
and ending markers:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt; (define bar "BAR") &gt;&gt;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">foo1</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">foo2 &lt;&lt; bar newline* bar &gt;&gt; baz</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">foo3</span></p></td></tr></table></p><p>First, this file is converted to the following Racket code:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(thunk (cd "tmp/") (current-file "foo"))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(thunk (push-indentation ""))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(define bar "BAR") (thunk (pop-indentation))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">newline*</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">"foo1"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">newline*</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">"foo2 "</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(thunk (push-indentation "</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">bar newline* bar (thunk (pop-indentation))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">" baz"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">newline*</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">"foo3"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">newline*</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(thunk (cd "/home/eli") (current-file #f))</span></p></td></tr></table></p><p>which is then fed to the REPL, resulting in the following output:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">foo1</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">foo2 BAR</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">BAR baz</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">foo3</span></p></td></tr></table></p><p>To see the processed input that the REPL receives, use the <span class="nobreak"><span class="stt">--debug</span></span>
flag.  Note that the processed code contains expressions that have no
side-effects, only values&#8212;<wbr></wbr>see below for an explanation of the REPL
printing behavior.  Some expressions produce values that change the REPL
environment, for example, the indentation commands are used to keep
track of the column where the Racket marker was found, and <span class="stt">cd</span> is used
to switch to the directory where the file is (here it was in
<span class="stt">"/home/foo/tmp"</span>) so including a relative file works.  Also, note that
the first <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._newline%2A%29%29" class="RktValLink" data-pltdoc="x">newline*</a></span> did not generate a newline, and that the one in the
embedded Racket code added the appropriate spaces for indentation.</p><p>It is possible to temporarily switch from Racket to text-mode and back
in a way that does not respect a complete Racket expression, but you
should be aware that text is converted to a <span style="font-family: 楷体">sequence</span> of side-effect
free expressions (not to a single string, and not expression that uses
side effects).  For example:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt; (if (zero? (random 2))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(list &gt;&gt;foo1&lt;&lt;)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(list &gt;&gt;foo2&lt;&lt;))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt;&gt;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt; (if (zero? (random 2)) (list &gt;&gt;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">foo1</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;) (list &gt;&gt;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">foo2</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;)) &gt;&gt;</span></p></td></tr></table></p><p>will print two lines, each containing <span class="RktInBG"><span class="hspace"></span><span class="RktIn">foo1</span><span class="hspace"></span></span> or <span class="RktInBG"><span class="hspace"></span><span class="RktIn">foo</span><span class="hspace"></span></span> (the
first approach plays better with the smart space handling).  The <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._show%29%29" class="RktValLink" data-pltdoc="x">show</a></span>
function can be used instead of <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">list</a></span> with the same results, since it
will print out the values in the same way the REPL does.  The conversion
process does not transform every continuous piece of text into a single Racket
string because doing this:</p><ul><li><p>the Racket process will need to allocating big strings which makes
this unfeasible for big files,</p></li><li><p>it will not play well with &ldquo;interactive&rdquo; input feeding, for example,
piping in the output of some process will show results only on Racket
marker boundaries,</p></li><li><p>special treatment for newlines in these strings will become expensive.</p></li></ul><p>(Note that this is different from the BRL approach.)</p><h4 x-source-module="(lib &quot;preprocessor/scribblings/preprocessor.scrbl&quot;)" x-source-pkg="preprocessor" x-part-tag="&quot;Raw_preprocessing_directives&quot;">2.3<tt>&nbsp;</tt><a name="(part._.Raw_preprocessing_directives)"></a>Raw preprocessing directives</h4><p>Some preprocessing directives happen at the "raw level"&#8212;<wbr></wbr>the stage
where text is transformed into Racket expressions.  These directives
cannot be changed from within transformed text because they change the
way this transformation happens.  Some of these transformation</p><ul><li><p>Skipping input:</p><p>First, the processing can be modified by specifying a <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._skip-to%29%29" class="RktValLink" data-pltdoc="x">skip-to</a></span> string
  that disables any output until a certain line is seen.  This is useful
  for script files that use themselves for input.  For example, the
  following script:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#!/bin/sh</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">echo shell output</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">exec mzpp -s "---TEXT-START---" "$0"</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">exit 1</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">---TEXT-START---</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">Some preprocessed text</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">123*456*789 = &lt;&lt; (* 123 456 789) &gt;&gt;</span></p></td></tr></table></p><p>will produce this output:</p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">shell output</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">Some preprocessed text</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">123*456*789 = 44253432</span></p></td></tr></table></li><li><p>Quoting the markers:</p><p>In case you need to use the actual text of the markers, you can quote
them.  A backslash before a beginning or an ending marker will make
the marker treated as text, it can also quote a sequence of
backslashes and a marker.  For example, using the default markers,
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">\&lt;&lt;\&gt;&gt;</span><span class="hspace"></span></span> will output <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;&lt;&gt;&gt;</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">\\&lt;&lt;\\\&gt;&gt;</span><span class="hspace"></span></span> will output <span class="RktInBG"><span class="hspace"></span><span class="RktIn">\&lt;&lt;\\&gt;&gt;</span><span class="hspace"></span></span> and
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">\a\b\&lt;&lt;</span><span class="hspace"></span></span> will output <span class="RktInBG"><span class="hspace"></span><span class="RktIn">\a\b&lt;&lt;</span><span class="hspace"></span></span>.</p></li><li><p>Modifying the markers:</p><p>Finally, if the markers collide with a certain file contents, it is
  possible to change them.  This is done by a line with a special
  structure&#8212;<wbr></wbr>if the current Racket markers are <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;beg1&gt;</span><span class="hspace"></span></span> and
  <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;end1&gt;</span><span class="hspace"></span></span> then a line that contains exactly:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;beg1&gt;&lt;beg2&gt;&lt;beg1&gt;&lt;end1&gt;&lt;end2&gt;&lt;end1&gt;</span></p></td></tr></table></p><p>will change the markers to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;beg2&gt;</span><span class="hspace"></span></span> and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;end2&gt;</span><span class="hspace"></span></span>.  It is
  possible to change the markers from the Racket side (see below), but this
  will not change already-transformed text, which is the reason for this
  special format.</p></li></ul><h4 x-source-module="(lib &quot;preprocessor/scribblings/preprocessor.scrbl&quot;)" x-source-pkg="preprocessor" x-part-tag="&quot;The_mzpp_read-eval-print_loop&quot;">2.4<tt>&nbsp;</tt><a name="(part._.The_mzpp_read-eval-print_loop)"></a>The mzpp read-eval-print loop</h4><p>The REPL is initialized by requiring <span class="RktSym">preprocessor/mzpp</span>, so the same
module provides both the preprocessor functionality as well as bindings for
embedded Racket code in processed files.  The REPL is then fed the transformed
Racket code that is generated from the source text (the same code that
<span class="nobreak"><span class="stt">--debug</span></span> shows).  Each expression is evaluated and its result is printed
using the <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._show%29%29" class="RktValLink" data-pltdoc="x">show</a></span> function (multiple values are all printed), where
<span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._show%29%29" class="RktValLink" data-pltdoc="x">show</a></span> works in the following way:</p><ul><li><p><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=guide&amp;rel=void_undefined.html&amp;version=7.0.0.18" class="RktModLink Sq" data-pltdoc="x"><span class="nobreak"><span class="RktRes">#&lt;void&gt;</span></span></a> and <span class="RktVal">#f</span> values are ignored.</p></li><li><p>Structures of pairs are recursively scanned and their parts printed
(no spaces are used, so to produce Racket code as output you must use
format strings&#8212;<wbr></wbr>again, this is not intended for preprocessing Racket
code).</p></li><li><p>Procedures are applied to zero arguments (so a procedure that doesn&rsquo;t
accept zero arguments will cause an error) and the result is sent back to
<span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._show%29%29" class="RktValLink" data-pltdoc="x">show</a></span>.  This is useful for using thunks to wrap side-effects as
values (e.g, the <span class="RktSym"><a href="#%28form._%28%28lib._preprocessor%2Fmzpp..rkt%29._thunk%29%29" class="RktStxLink" data-pltdoc="x">thunk</a></span> wraps shown by the debug output above).</p></li><li><p>Promises are forced and the result is sent again to <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._show%29%29" class="RktValLink" data-pltdoc="x">show</a></span>.</p></li><li><p>All other values are printed with <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">display</a></span>.  No newlines are
used after printing values.</p></li></ul><h4 x-source-module="(lib &quot;preprocessor/scribblings/preprocessor.scrbl&quot;)" x-source-pkg="preprocessor" x-part-tag="&quot;mzpp-lib&quot;">2.5<tt>&nbsp;</tt><a name="(part._mzpp-lib)"></a><a name="(mod-path._preprocessor/mzpp)"></a>Provided bindings</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._preprocessor%2Fmzpp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">preprocessor/mzpp</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package&#65306;</span> <a href="https://pkgs.racket-lang.org/package/preprocessor" title="使用“raco pkg install preprocessor”安装此包"><span class="stt">preprocessor</span></a></span></td></tr></table></p><p>First, bindings that are mainly useful for invoking the preprocessor:</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._preprocess))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._preprocess%29%29" class="RktValDef RktValLink" data-pltdoc="x">preprocess</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">This is the main entry point to the preprocessor&#8212;<wbr></wbr>invoking it on the
given list of files and input ports.  This is quite similar to
<span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._include%29%29" class="RktValLink" data-pltdoc="x">include</a></span>, but it adds some setup of the preprocessed code environment
(like requiring the <span class="stt">mzpp</span> module).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._skip-to))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._skip-to%29%29" class="RktValDef RktValLink" data-pltdoc="x">skip-to</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._skip-to%29%29" class="RktValDef RktValLink" data-pltdoc="x">skip-to</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">str</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A string parameter&#8212;<wbr></wbr>when the preprocessor is started, it ignores
everything until a line that contains exactly this string is
encountered.  This is primarily useful through a command-line flag for
scripts that extract some text from their own body.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._debug~3f))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._debug~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">debug?</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._debug~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">debug?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">on?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A boolean parameter.  If true, then the REPL is not invoked, instead,
the converted Racket code is printed as is.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._no-spaces~3f))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._no-spaces~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">no-spaces?</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._no-spaces~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">no-spaces?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">on?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A boolean parameter.  If true, then the "smart" preprocessing of
spaces is turned off.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._beg-mark))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._beg-mark%29%29" class="RktValDef RktValLink" data-pltdoc="x">beg-mark</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._beg-mark%29%29" class="RktValDef RktValLink" data-pltdoc="x">beg-mark</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">str</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._end-mark))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._end-mark%29%29" class="RktValDef RktValLink" data-pltdoc="x">end-mark</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._end-mark%29%29" class="RktValDef RktValLink" data-pltdoc="x">end-mark</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">str</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">These two parameters are used to specify the Racket beginning and end
markers.</div></p><p>All of the above are accessible in preprocessed texts, but the only one that
might make any sense to use is <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._preprocess%29%29" class="RktValLink" data-pltdoc="x">preprocess</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._include%29%29" class="RktValLink" data-pltdoc="x">include</a></span> is a
better choice.  When <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._include%29%29" class="RktValLink" data-pltdoc="x">include</a></span> is used, it can be wrapped with parameter
settings, which is why they are available.  Note in particular that these
parameters change the way that the text transformation works and have no effect
over the current preprocessed document (for example, the Racket marks are used
in a different thread, and <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._skip-to%29%29" class="RktValLink" data-pltdoc="x">skip-to</a></span> cannot be re-set when processing
has already began).  The only one that could be used is <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._no-spaces~3f%29%29" class="RktValLink" data-pltdoc="x">no-spaces?</a></span> but
even that makes little sense on selected parts.</p><p>The following are bindings that are used in preprocessed texts:</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._push-indentation))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._push-indentation%29%29" class="RktValDef RktValLink" data-pltdoc="x">push-indentation</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">str</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._pop-indentation))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._pop-indentation%29%29" class="RktValDef RktValLink" data-pltdoc="x">pop-indentation</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">These two calls are used to save the indentation column where the Racket
beginning mark was found, and will be used by <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._newline%2A%29%29" class="RktValLink" data-pltdoc="x">newline*</a></span> (unless smart
space handling mode is disabled).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._show))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._show%29%29" class="RktValDef RktValLink" data-pltdoc="x">show</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">The arguments are displayed as specified above.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._newline*))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._newline%2A%29%29" class="RktValDef RktValLink" data-pltdoc="x">newline*</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This is similar to <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Byte_and_String_Output.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._newline%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">newline</a></span> except that it tries to handle spaces in
a &ldquo;smart&rdquo; way&#8212;<wbr></wbr>it will print a newline and then spaces to reach the
left margin of the opening <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;&lt;</span><span class="hspace"></span></span>.  (Actually, it tries a bit more, for
example, it won&rsquo;t print the spaces if nothing is printed before
another newline.)  Setting <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._no-spaces~3f%29%29" class="RktValLink" data-pltdoc="x">no-spaces?</a></span> to true disable this leaving
it equivalent to <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Byte_and_String_Output.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._newline%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">newline</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._include))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._include%29%29" class="RktValDef RktValLink" data-pltdoc="x">include</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">This is the preferred way of including another file in the processing.  File
names are searched relatively to the current preprocessed file, and during
processing the current directory is temporarily changed to make this work.
In addition to file names, the arguments can be input ports (the current
directory is not changed in this case).  The files that will be incorporated
can use any current Racket bindings etc, and will use the current
markers&#8212;<wbr></wbr>but the included files cannot change any of the parameter settings
for the current processing (specifically, the marks and the working directory
will be restored when the included files are processed).</div></p><p>Note that when a sequence of files are processed (through command-line
  arguments or through a single <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._include%29%29" class="RktValLink" data-pltdoc="x">include</a></span> expression), then they are all
  taken as one textual unit&#8212;<wbr></wbr>so changes to the markers, working directory etc
  in one file can modify the way sequential files are processed.  This means
  that including two files in a single <span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._include%29%29" class="RktValLink" data-pltdoc="x">include</a></span> expression can be
  different than using two expressions.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20540;</p></div></div><p class="RForeground"><a name="(def._((lib._preprocessor/mzpp..rkt)._stdin))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._stdin%29%29" class="RktValDef RktValLink" data-pltdoc="x">stdin</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._parameter%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">parameter?</a></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20540;</p></div></div><p class="RForeground"><a name="(def._((lib._preprocessor/mzpp..rkt)._stdout))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._stdout%29%29" class="RktValDef RktValLink" data-pltdoc="x">stdout</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._parameter%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">parameter?</a></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20540;</p></div></div><p class="RForeground"><a name="(def._((lib._preprocessor/mzpp..rkt)._stderr))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._stderr%29%29" class="RktValDef RktValLink" data-pltdoc="x">stderr</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._parameter%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">parameter?</a></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20540;</p></div></div><p class="RForeground"><a name="(def._((lib._preprocessor/mzpp..rkt)._cd))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._cd%29%29" class="RktValDef RktValLink" data-pltdoc="x">cd</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._parameter%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">parameter?</a></span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">These are shorter names for the corresponding port parameters and
<span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._preprocessor/mzpp..rkt)._current-file))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._current-file%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-file</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28def._%28%28lib._preprocessor%2Fmzpp..rkt%29._current-file%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-file</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">This is a parameter that holds the name of the currently processed
file, or #f if none.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#35821;&#27861;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._preprocessor/mzpp..rkt)._thunk))"></a><span title="提供自：preprocessor/mzpp | 包：preprocessor"><span class="RktSym"><a href="#%28form._%28%28lib._preprocessor%2Fmzpp..rkt%29._thunk%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">thunk</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Expands to <span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">expr</span><span class="stt"> </span><span class="RktMeta"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span>.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="…搜索手册…" title="输入搜索字符串以搜索手册" onkeypress="return DoSearchKey(event, this, &quot;7.0.0.18&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;…搜索手册…&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;…搜索手册…&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="上至文档的顶层" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.0.0.18&quot;);">&#39030;&#23618;</a></span><span class="navright">&nbsp;&nbsp;<a href="overview.html" title="后退至&quot;1 Overview&quot;" data-pltdoc="x">&larr; &#21069;&#19968;&#39029;</a>&nbsp;&nbsp;<a href="index.html" title="上至&quot;mzpp and mztext: Preprocessors&quot;" data-pltdoc="x">&#19978;&#19968;&#23618;</a>&nbsp;&nbsp;<a href="mztext.html" title="前进至&quot;3 mztext&quot;" data-pltdoc="x">&#21518;&#19968;&#39029; &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>