<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>28&nbsp;Preferences, Textual</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Framework:<span class="mywbr"> &nbsp;</span> Racket GUI Application Framework</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Framework_Libraries_Overview.html" class="tocviewlink" data-pltdoc="x">Framework Libraries Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Application.html" class="tocviewlink" data-pltdoc="x">Application</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Autosave.html" class="tocviewlink" data-pltdoc="x">Autosave</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Canvas.html" class="tocviewlink" data-pltdoc="x">Canvas</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Color_Model.html" class="tocviewlink" data-pltdoc="x">Color Model</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Color_Prefs.html" class="tocviewlink" data-pltdoc="x">Color Prefs</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Color.html" class="tocviewlink" data-pltdoc="x">Color</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Comment_Box.html" class="tocviewlink" data-pltdoc="x">Comment Box</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Decorated_Editor_Snip.html" class="tocviewlink" data-pltdoc="x">Decorated Editor Snip</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="editor-snip.html" class="tocviewlink" data-pltdoc="x">Editor Snip</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Editor.html" class="tocviewlink" data-pltdoc="x">Editor</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="Exit.html" class="tocviewlink" data-pltdoc="x">Exit</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="Finder.html" class="tocviewlink" data-pltdoc="x">Finder</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="Frame.html" class="tocviewlink" data-pltdoc="x">Frame</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Group.html" class="tocviewlink" data-pltdoc="x">Group</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="GUI_Utilities.html" class="tocviewlink" data-pltdoc="x">GUI Utilities</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="Handler.html" class="tocviewlink" data-pltdoc="x">Handler</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="Icon.html" class="tocviewlink" data-pltdoc="x">Icon</a></td></tr><tr><td align="right">19&nbsp;</td><td><a href="Keymap.html" class="tocviewlink" data-pltdoc="x">Keymap</a></td></tr><tr><td align="right">20&nbsp;</td><td><a href="Menu.html" class="tocviewlink" data-pltdoc="x">Menu</a></td></tr><tr><td align="right">21&nbsp;</td><td><a href="Mode.html" class="tocviewlink" data-pltdoc="x">Mode</a></td></tr><tr><td align="right">22&nbsp;</td><td><a href="gui-notify.html" class="tocviewlink" data-pltdoc="x">Notify-<wbr></wbr>boxes</a></td></tr><tr><td align="right">23&nbsp;</td><td><a href="Number_Snip.html" class="tocviewlink" data-pltdoc="x">Number Snip</a></td></tr><tr><td align="right">24&nbsp;</td><td><a href="Panel.html" class="tocviewlink" data-pltdoc="x">Panel</a></td></tr><tr><td align="right">25&nbsp;</td><td><a href="Pasteboard.html" class="tocviewlink" data-pltdoc="x">Pasteboard</a></td></tr><tr><td align="right">26&nbsp;</td><td><a href="Path_Utils.html" class="tocviewlink" data-pltdoc="x">Path Utils</a></td></tr><tr><td align="right">27&nbsp;</td><td><a href="Preferences.html" class="tocviewlink" data-pltdoc="x">Preferences</a></td></tr><tr><td align="right">28&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Preferences, Textual</a></td></tr><tr><td align="right">29&nbsp;</td><td><a href="Racket.html" class="tocviewlink" data-pltdoc="x">Racket</a></td></tr><tr><td align="right">30&nbsp;</td><td><a href="Text.html" class="tocviewlink" data-pltdoc="x">Text</a></td></tr><tr><td align="right">31&nbsp;</td><td><a href="Splash.html" class="tocviewlink" data-pltdoc="x">Splash</a></td></tr><tr><td align="right">32&nbsp;</td><td><a href="Test.html" class="tocviewlink" data-pltdoc="x">Test</a></td></tr><tr><td align="right">33&nbsp;</td><td><a href="Version.html" class="tocviewlink" data-pltdoc="x">Version</a></td></tr><tr><td align="right">34&nbsp;</td><td><a href="Backwards_Compatibility.html" class="tocviewlink" data-pltdoc="x">Backwards Compatibility</a></td></tr><tr><td align="right">35&nbsp;</td><td><a href="Signatures.html" class="tocviewlink" data-pltdoc="x">Signatures</a></td></tr><tr><td align="right">36&nbsp;</td><td><a href="Unit.html" class="tocviewlink" data-pltdoc="x">Unit</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">在本页中：</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>get</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>set</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget%2Fset%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>get/<span class="mywbr"> &nbsp;</span>set</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aadd-callback%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>add-<wbr></wbr>callback</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>set-<wbr></wbr>default</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3adefault-set~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>default-<wbr></wbr>set?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-un%2Fmarshall%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>set-<wbr></wbr>un/<span class="mywbr"> &nbsp;</span>marshall</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3arestore-defaults%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>restore-<wbr></wbr>defaults</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aregister-save-callback%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>register-<wbr></wbr>save-<wbr></wbr>callback</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aunregister-save-callback%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>unregister-<wbr></wbr>save-<wbr></wbr>callback</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._exn~3amake-unknown-preference%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">exn:<span class="mywbr"> &nbsp;</span>make-<wbr></wbr>unknown-<wbr></wbr>preference</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._exn~3aunknown-preference~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">exn:<span class="mywbr"> &nbsp;</span>unknown-<wbr></wbr>preference?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._exn~3astruct~3aunknown-preference%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">exn:<span class="mywbr"> &nbsp;</span>struct:<span class="mywbr"> &nbsp;</span>unknown-<wbr></wbr>preference</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alow-level-put-preferences%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>low-<wbr></wbr>level-<wbr></wbr>put-<wbr></wbr>preferences</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alow-level-get-preference%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>low-<wbr></wbr>level-<wbr></wbr>get-<wbr></wbr>preference</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3asnapshot~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>snapshot?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3arestore-prefs-snapshot%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>restore-<wbr></wbr>prefs-<wbr></wbr>snapshot</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget-prefs-snapshot%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>get-<wbr></wbr>prefs-<wbr></wbr>snapshot</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3anew-layer%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>new-<wbr></wbr>layer</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alayer~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>layer?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3acurrent-layer%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preferences:<span class="mywbr"> &nbsp;</span>current-<wbr></wbr>layer</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="…搜索手册…" title="输入搜索字符串以搜索手册" onkeypress="return DoSearchKey(event, this, &quot;7.0.0.18&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;…搜索手册…&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;…搜索手册…&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="上至文档的顶层" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.0.0.18&quot;);">&#39030;&#23618;</a></span><span class="navright">&nbsp;&nbsp;<a href="Preferences.html" title="后退至&quot;27 Preferences&quot;" data-pltdoc="x">&larr; &#21069;&#19968;&#39029;</a>&nbsp;&nbsp;<a href="index.html" title="上至&quot;Framework: Racket GUI Application Framework&quot;" data-pltdoc="x">&#19978;&#19968;&#23618;</a>&nbsp;&nbsp;<a href="Racket.html" title="前进至&quot;29 Racket&quot;" data-pltdoc="x">&#21518;&#19968;&#39029; &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;scribblings/framework/framework.scrbl&quot;)" x-source-pkg="gui-doc" x-part-tag="&quot;Preferences__Textual&quot;">28<tt>&nbsp;</tt><a name="(part._.Preferences__.Textual)"></a><a name="(mod-path._framework/preferences)"></a>Preferences, Textual</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">framework/preferences</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package&#65306;</span> <a href="https://pkgs.racket-lang.org/package/gui-lib" title="使用“raco pkg install gui-lib”安装此包"><span class="stt">gui-lib</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3aget))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:get</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">symbol</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">symbol</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">See also <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="RktValLink" data-pltdoc="x">preferences:set-default</a></span>.</div></p><p><div class="SIntrapara"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget%29%29" class="RktValLink" data-pltdoc="x">preferences:get</a></span> returns the value for the preference
    <span class="RktVar">symbol</span>. It raises an exception matching
    <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._exn~3aunknown-preference~3f%29%29" class="RktValLink" data-pltdoc="x">exn:unknown-preference?</a></span>
    if the preference&rsquo;s default has not been set.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3aset))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:set</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">symbol</span><span class="hspace">&nbsp;</span><span class="RktVar">value</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">symbol</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">value</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Sets the preference
<span class="RktVar">symbol</span> to <span class="RktVar">value</span>. It should be called when the
user requests a change to a preference.</div></p><p><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset%29%29" class="RktValLink" data-pltdoc="x">preferences:set</a></span> immediately writes the preference value to disk.
It raises an exception matching
<span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._exn~3aunknown-preference~3f%29%29" class="RktValLink" data-pltdoc="x">exn:unknown-preference?</a></span>
if the preference&rsquo;s default has not been set</p><p><div class="SIntrapara">See also <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="RktValLink" data-pltdoc="x">preferences:set-default</a></span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3aget/set))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget%2Fset%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:get/set</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pref</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._case-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">case-&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pref</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a procedure that when applied to zero arguments retrieves the
current value of the preference named <span class="RktVar">pref</span> and when
applied to one argument updates the preference named <span class="RktVar">pref</span>.</div></p><p><div class="SIntrapara"><p class="SHistory">&#28155;&#21152;&#20110;package <span class="stt">gui-lib</span>&#30340;1.18&#29256;&#26412;&#12290;</p></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3aadd-callback))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aadd-callback%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:add-callback</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>[<span class="RktVar">weak?</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">weak?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">This function adds a callback which is called with a symbol naming a
preference and its value, when the preference changes.
<span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aadd-callback%29%29" class="RktValLink" data-pltdoc="x">preferences:add-callback</a></span> returns a thunk, which when
invoked, removes the callback from this preference.</div></p><p>If <span class="RktVar">weak?</span> is true, the preferences system will only hold on to
the callback
<a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=eval-model.html%23%2528tech._weak._reference%2529&amp;version=7.0.0.18" class="techoutside Sq" data-pltdoc="x"><span class="techinside">weakly</span></a>.</p><p>The callbacks will be called in the order in which they were added.</p><p>If you are adding a callback for a preference that requires
marshalling and unmarshalling, you must set the marshalling and
unmarshalling functions by calling
<span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-un%2Fmarshall%29%29" class="RktValLink" data-pltdoc="x">preferences:set-un/marshall</a></span> before adding a callback.</p><p>The result thunk removes the callback from the same <a href="#%28tech._preferences._layer%29" class="techoutside" data-pltdoc="x"><span class="techinside">preferences layer</span></a>
that <span class="RktVar">p</span> was in when <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aadd-callback%29%29" class="RktValLink" data-pltdoc="x">preferences:add-callback</a></span> was
originally called.</p><p><div class="SIntrapara">This function raises an exception matching
<span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._exn~3aunknown-preference~3f%29%29" class="RktValLink" data-pltdoc="x">exn:unknown-preference?</a></span>
if the preference default has not been set via
<span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="RktValLink" data-pltdoc="x">preferences:set-default</a></span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3aset-default))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:set-default</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">symbol</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">value</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">test</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:aliases</span><span class="hspace">&nbsp;</span><span class="RktVar">aliases</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:rewrite-aliases</span><span class="hspace">&nbsp;</span><span class="RktVar">rewrite-aliases</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">symbol</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">value</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">test</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">aliases</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">rewrite-aliases</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">aliases</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">This function must be called every time your application starts up, before
any call to <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget%29%29" class="RktValLink" data-pltdoc="x">preferences:get</a></span> or <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset%29%29" class="RktValLink" data-pltdoc="x">preferences:set</a></span>
(for any given preference).</div></p><p>If you use <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-un%2Fmarshall%29%29" class="RktValLink" data-pltdoc="x">preferences:set-un/marshall</a></span>,
you must call this function before calling it.</p><p>This sets the default value of the preference <span class="RktVar">symbol</span> to
<span class="RktVar">value</span>. If the user has chosen a different setting,
(reflected via a call to <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset%29%29" class="RktValLink" data-pltdoc="x">preferences:set</a></span>, possibly
in a different run of your program),
the user&rsquo;s setting will take precedence over the default value.</p><p>The <span class="RktVar">test</span> argument is used as a safeguard. That function is
called to determine if a preference read in from a file is a valid
preference. If <span class="RktVar">test</span> returns <span class="RktVal">#t</span>, then the preference is
treated as valid. If <span class="RktVar">test</span> returns <span class="RktVal">#f</span> then the default is
used.</p><p>The <span class="RktVar">aliases</span> and <span class="RktVar">rewrite-aliases</span> arguments aids
in renaming preferences. If <span class="RktVar">aliases</span> is present, it is
expected to be a list of symbols that correspond to old versions
of the preferences. It defaults to <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>. If <span class="RktVar">rewrite-aliases</span>
is present, it is used to adjust the old values of the preferences
when they are present in the saved file.</p><p><div class="SIntrapara"><p class="SHistory">&#20462;&#25913;&#20110;package <span class="stt">gui-lib</span>&#30340;1.23&#29256;&#26412;&#65306;Allow <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="RktValLink" data-pltdoc="x">preferences:set-default</a></span>
to be called even after a snapshot has been grabbed.</p></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3adefault-set~3f))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3adefault-set~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:default-set?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pref</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pref</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">pref</span> has been passed to
        <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="RktValLink" data-pltdoc="x">preferences:set-default</a></span>, <span class="RktVal">#f</span>
        otherwise</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3aset-un/marshall))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-un%2Fmarshall%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:set-un/marshall</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">symbol</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">marshall</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">unmarshall</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">symbol</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">marshall</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._printable%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">printable/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">unmarshall</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._printable%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">printable/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-un%2Fmarshall%29%29" class="RktValLink" data-pltdoc="x">preferences:set-un/marshall</a></span> is used to specify marshalling and
unmarshalling functions for the preference
<span class="RktVar">symbol</span>. <span class="RktVar">marshall</span> will be called when the users saves their
preferences to turn the preference value for <span class="RktVar">symbol</span> into a
printable value. <span class="RktVar">unmarshall</span> will be called when the user&rsquo;s
preferences are read from the file to transform the printable value
into its internal representation. If <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-un%2Fmarshall%29%29" class="RktValLink" data-pltdoc="x">preferences:set-un/marshall</a></span>
is never called for a particular preference, the values of that
preference are assumed to be printable.</div></p><p>If the unmarshalling function returns a value that does not meet the
guard passed to <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="RktValLink" data-pltdoc="x">preferences:set-default</a></span>
for this preference, the default value is used.</p><p>The <span class="RktVar">marshall</span> function might be called with any value returned
from <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">read</a></span> and it must not raise an error
(although it can return arbitrary results if it gets bad input). This might
happen when the preferences file becomes corrupted, or is edited
by hand.</p><p><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-un%2Fmarshall%29%29" class="RktValLink" data-pltdoc="x">preferences:set-un/marshall</a></span> must be called before calling
<span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget%29%29" class="RktValLink" data-pltdoc="x">preferences:get</a></span>,<span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset%29%29" class="RktValLink" data-pltdoc="x">preferences:set</a></span>.</p><p><div class="SIntrapara">See also <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=serialization.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fserialize..rkt%2529._serialize%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">serialize</a></span> and <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=serialization.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fserialize..rkt%2529._deserialize%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">deserialize</a></span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3arestore-defaults))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3arestore-defaults%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:restore-defaults</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3arestore-defaults%29%29" class="RktValLink" data-pltdoc="x">preferences:restore-defaults</a></span><span class="RktPn">)</span> restores the users&rsquo; configuration
to the default preferences.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3aregister-save-callback))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aregister-save-callback%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:register-save-callback</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">callback</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">callback</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Registers <span class="RktVar">callback</span> to run twice for each call
to <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset%29%29" class="RktValLink" data-pltdoc="x">preferences:set</a></span>&#8212;<wbr></wbr>once before the preferences
file is written, with <span class="RktVal">#t</span>, and once after it is
written, with <span class="RktVal">#f</span>. Registration returns a key for
use with <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aunregister-save-callback%29%29" class="RktValLink" data-pltdoc="x">preferences:unregister-save-callback</a></span>.
Caveats: </div><div class="SIntrapara"><ul><li><p>The callback occurs on whichever
thread happened to call <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset%29%29" class="RktValLink" data-pltdoc="x">preferences:set</a></span>.</p></li><li><p>Pre- and post-write notifications are not necessarily
paired; unregistration may cancel the post-write
notification before it occurs.</p></li></ul></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3aunregister-save-callback))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aunregister-save-callback%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:unregister-save-callback</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">key</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Unregisters the save callback associated with <span class="RktVar">key</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._exn~3amake-unknown-preference))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._exn~3amake-unknown-preference%29%29" class="RktValDef RktValLink" data-pltdoc="x">exn:make-unknown-preference</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">message</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">continuation-marks</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._exn~3aunknown-preference~3f%29%29" class="RktValLink" data-pltdoc="x">exn:unknown-preference?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">continuation-marks</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=contmarks.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._continuation-mark-set%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">continuation-mark-set?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates an unknown preference exception.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._exn~3aunknown-preference~3f))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._exn~3aunknown-preference~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">exn:unknown-preference?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">exn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">exn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Determines if a value is an unknown preference exn.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20540;</p></div></div><p class="RForeground"><a name="(def._((lib._framework/preferences..rkt)._exn~3astruct~3aunknown-preference))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._exn~3astruct~3aunknown-preference%29%29" class="RktValDef RktValLink" data-pltdoc="x">exn:struct:unknown-preference</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=structutils.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._struct-type%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">struct-type?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The struct type for the unknown preference exn.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3alow-level-put-preferences))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alow-level-put-preferences%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:low-level-put-preferences</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alow-level-put-preferences%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:low-level-put-preferences</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">put-preferences</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">put-preferences</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">This parameter&rsquo;s value is called to save preference the preferences file.
Its interface should be just like mzlib&rsquo;s <span class="RktVar">put-preferences</span>.</div></p><p><div class="SIntrapara">The default value calls <span class="RktVar">put-preferences</span> and, if there is an error,
then starts using a hash-table to save the preferences instead.
See also </div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3alow-level-get-preference))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alow-level-get-preference%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:low-level-get-preference</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%252A%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span>*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alow-level-get-preference%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:low-level-get-preference</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">get-preference</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">get-preference</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%252A%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span>*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">This parameter&rsquo;s value is called to get a preference from the preferences
file. Its interface should be just like <span class="RktVar">get-preference</span>.</div></p><p><div class="SIntrapara">The default value calls <span class="RktSym">get-preferences</span> and, if there is an error,
then starts using a hash-table to save the preferences instead.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3asnapshot~3f))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3asnapshot~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:snapshot?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Determines if its argument is a preferences snapshot.</div></p><p><div class="SIntrapara">See also <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget-prefs-snapshot%29%29" class="RktValLink" data-pltdoc="x">preferences:get-prefs-snapshot</a></span> and
<span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3arestore-prefs-snapshot%29%29" class="RktValLink" data-pltdoc="x">preferences:restore-prefs-snapshot</a></span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3arestore-prefs-snapshot))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3arestore-prefs-snapshot%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:restore-prefs-snapshot</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">snapshot</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">snapshot</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3asnapshot~3f%29%29" class="RktValLink" data-pltdoc="x">preferences:snapshot?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Restores the preferences saved in <span class="RktVar">snapshot</span>, updating
all of the preferences values to the ones they had at the time
that <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget-prefs-snapshot%29%29" class="RktValLink" data-pltdoc="x">preferences:get-prefs-snapshot</a></span> was called.</div></p><p><div class="SIntrapara">See also <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget-prefs-snapshot%29%29" class="RktValLink" data-pltdoc="x">preferences:get-prefs-snapshot</a></span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3aget-prefs-snapshot))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget-prefs-snapshot%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:get-prefs-snapshot</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3asnapshot~3f%29%29" class="RktValLink" data-pltdoc="x">preferences:snapshot?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Caches all of the current values of the known preferences and returns them.
For any preference that has marshalling and unmarshalling set
(see <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-un%2Fmarshall%29%29" class="RktValLink" data-pltdoc="x">preferences:set-un/marshall</a></span>), the preference value is
copied by passing it through the marshalling and unmarshalling process.
Other values are not copied, but references to them are instead saved.</div></p><p><div class="SIntrapara">See also <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3arestore-prefs-snapshot%29%29" class="RktValLink" data-pltdoc="x">preferences:restore-prefs-snapshot</a></span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3anew-layer))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3anew-layer%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:new-layer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">previous-preferences-layer</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alayer~3f%29%29" class="RktValLink" data-pltdoc="x">preferences:layer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">previous-preferences-layer</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alayer~3f%29%29" class="RktValLink" data-pltdoc="x">preferences:layer?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a <a href="#%28tech._preferences._layer%29" class="techoutside" data-pltdoc="x"><span class="techinside">preferences layer</span></a> that extends <span class="RktVar">previous-preferences-layer</span>.</div></p><p><div class="SIntrapara"><p class="SHistory">&#28155;&#21152;&#20110;package <span class="stt">gui-lib</span>&#30340;1.30&#29256;&#26412;&#12290;</p></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3alayer~3f))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alayer~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:layer?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Determines if <span class="RktVar">v</span> is a <a name="(tech._preferences._layer)"></a><span style="font-family: 楷体">preferences layer</span>.</div></p><p>A preferences layer gives a form of scoping to preferences. When
a new preference is first registered with this library (via a call to
<span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="RktValLink" data-pltdoc="x">preferences:set-default</a></span> or <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aadd-callback%29%29" class="RktValLink" data-pltdoc="x">preferences:add-callback</a></span>)
it is put into the layer in <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3acurrent-layer%29%29" class="RktValLink" data-pltdoc="x">preferences:current-layer</a></span>
(and not into any of that layer&rsquo;s previous layers).
When <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget%29%29" class="RktValLink" data-pltdoc="x">preferences:get</a></span>, <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset%29%29" class="RktValLink" data-pltdoc="x">preferences:set</a></span>,
<span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-un%2Fmarshall%29%29" class="RktValLink" data-pltdoc="x">preferences:set-un/marshall</a></span> are called, they consult and
manipulate only the layer where the preference was first installed.
Accordingly, preference layers give a way to discard some set of
calls to <span class="RktSym">preference:set-default</span> and other preference configuration
and to start over with a new set. Note that this affects only the configuration
of the preferences for the library; the values are all stored centrally
(see <span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alow-level-put-preferences%29%29" class="RktValLink" data-pltdoc="x">preferences:low-level-put-preferences</a></span>) and are unaffected
by the layers.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">original-layer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3acurrent-layer%29%29" class="RktValLink" data-pltdoc="x">preferences:current-layer</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">layer2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3anew-layer%29%29" class="RktValLink" data-pltdoc="x">preferences:new-layer</a></span><span class="hspace">&nbsp;</span><span class="RktSym">original-layer</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._parameterize%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">parameterize</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3acurrent-layer%29%29" class="RktValLink" data-pltdoc="x">preferences:current-layer</a></span><span class="hspace">&nbsp;</span><span class="RktSym">layer2</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">initialize 'a-pref in layer2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="RktValLink" data-pltdoc="x">preferences:set-default</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a-pref</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._real%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">real?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset%29%29" class="RktValLink" data-pltdoc="x">preferences:set</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a-pref</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget%29%29" class="RktValLink" data-pltdoc="x">preferences:get</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a-pref</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">6</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">layer3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3anew-layer%29%29" class="RktValLink" data-pltdoc="x">preferences:new-layer</a></span><span class="hspace">&nbsp;</span><span class="RktSym">original-layer</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._parameterize%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">parameterize</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3acurrent-layer%29%29" class="RktValLink" data-pltdoc="x">preferences:current-layer</a></span><span class="hspace">&nbsp;</span><span class="RktSym">layer3</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">initialize 'a-pref again, this time in layer3</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">without the new layer in place, this would be an error</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aset-default%29%29" class="RktValLink" data-pltdoc="x">preferences:set-default</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a-pref</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._real%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">real?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the actual value of the preference remains</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">from the previous call to preferences:set</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3aget%29%29" class="RktValLink" data-pltdoc="x">preferences:get</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a-pref</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">6</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><p class="SHistory">&#28155;&#21152;&#20110;package <span class="stt">gui-lib</span>&#30340;1.30&#29256;&#26412;&#12290;</p></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._framework/preferences..rkt)._preferences~3acurrent-layer))"></a><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3acurrent-layer%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:current-layer</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alayer~3f%29%29" class="RktValLink" data-pltdoc="x">preferences:layer?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：framework/preferences、framework | 包：gui-lib"><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3acurrent-layer%29%29" class="RktValDef RktValLink" data-pltdoc="x">preferences:current-layer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">preferences-layer</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">preferences-layer</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._framework%2Fpreferences..rkt%29._preferences~3alayer~3f%29%29" class="RktValLink" data-pltdoc="x">preferences:layer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Determines the current <a href="#%28tech._preferences._layer%29" class="techoutside" data-pltdoc="x"><span class="techinside">preferences layer</span></a>.
</div><div class="SIntrapara"><p class="SHistory">&#28155;&#21152;&#20110;package <span class="stt">gui-lib</span>&#30340;1.30&#29256;&#26412;&#12290;</p></div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="…搜索手册…" title="输入搜索字符串以搜索手册" onkeypress="return DoSearchKey(event, this, &quot;7.0.0.18&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;…搜索手册…&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;…搜索手册…&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="上至文档的顶层" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.0.0.18&quot;);">&#39030;&#23618;</a></span><span class="navright">&nbsp;&nbsp;<a href="Preferences.html" title="后退至&quot;27 Preferences&quot;" data-pltdoc="x">&larr; &#21069;&#19968;&#39029;</a>&nbsp;&nbsp;<a href="index.html" title="上至&quot;Framework: Racket GUI Application Framework&quot;" data-pltdoc="x">&#19978;&#19968;&#23618;</a>&nbsp;&nbsp;<a href="Racket.html" title="前进至&quot;29 Racket&quot;" data-pltdoc="x">&#21518;&#19968;&#39029; &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>