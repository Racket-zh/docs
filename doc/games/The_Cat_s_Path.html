<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1.18.5&nbsp;The Cat's Path</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Games:<span class="mywbr"> &nbsp;</span> Fun Examples</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="bundled.html" class="tocviewselflink" data-pltdoc="x">Bundled Games</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="new-games.html" class="tocviewlink" data-pltdoc="x">Implementing New Games</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Showing_Scribbled_Help.html" class="tocviewlink" data-pltdoc="x">Showing Scribbled Help</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Showing_Text_Help.html" class="tocviewlink" data-pltdoc="x">Showing Text Help</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="bundled.html" class="tocviewlink" data-pltdoc="x">Bundled Games</a></td></tr></table><div class="tocviewsublist" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="aces.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="aces.png" alt="" width="24" height="32"/></span> <span class="ssansserif">Aces</span> &#8212;<wbr></wbr> Solitaire Card Game</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="gofish.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="gofish.png" alt="" width="28" height="32"/></span> <span class="ssansserif">Go Fish</span> &#8212;<wbr></wbr> Kid&rsquo;s Card Game</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="crazy8s.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="crazy8s.png" alt="" width="24" height="32"/></span> <span class="ssansserif">Crazy 8s</span> &#8212;<wbr></wbr> Card Game</a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="blackjack.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="blackjack.png" alt="" width="28" height="32"/></span> <span class="ssansserif">Blackjack</span> &#8212;<wbr></wbr> 21 Card Game</a></td></tr><tr><td align="right">1.5&nbsp;</td><td><a href="ginrummy.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="ginrummy.png" alt="" width="28" height="32"/></span> <span class="ssansserif">Rummy</span> &#8212;<wbr></wbr> Card Game</a></td></tr><tr><td align="right">1.6&nbsp;</td><td><a href="spider.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="spider.png" alt="" width="24" height="32"/></span> <span class="ssansserif">Spider</span> &#8212;<wbr></wbr> Solitaire Card Game</a></td></tr><tr><td align="right">1.7&nbsp;</td><td><a href="memory.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="memory.png" alt="" width="26" height="32"/></span> <span class="ssansserif">Memory</span> &#8212;<wbr></wbr> Kid&rsquo;s Game</a></td></tr><tr><td align="right">1.8&nbsp;</td><td><a href="slidey.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="slidey.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Slidey</span> &#8212;<wbr></wbr> Picture Puzzle</a></td></tr><tr><td align="right">1.9&nbsp;</td><td><a href="same.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="same.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Same</span> &#8212;<wbr></wbr> Dot-<wbr></wbr>Removing Game</a></td></tr><tr><td align="right">1.10&nbsp;</td><td><a href="mines.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="mines.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Minesweeper</span> &#8212;<wbr></wbr> Logic Game</a></td></tr><tr><td align="right">1.11&nbsp;</td><td><a href="paint-by-numbers.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="paint-by-numbers.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Paint By Numbers</span> &#8212;<wbr></wbr> Logic Game</a></td></tr><tr><td align="right">1.12&nbsp;</td><td><a href="lights-out.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="lights-out.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Lights Out</span> &#8212;<wbr></wbr> Logic Game</a></td></tr><tr><td align="right">1.13&nbsp;</td><td><a href="pousse.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="pousse.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Pousse</span> &#8212;<wbr></wbr> Tic-<wbr></wbr>Tac-<wbr></wbr>Toe-<wbr></wbr>like Game</a></td></tr><tr><td align="right">1.14&nbsp;</td><td><a href="gobblet.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="gobblet.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Gobblet</span> &#8212;<wbr></wbr> Strategy Game</a></td></tr><tr><td align="right">1.15&nbsp;</td><td><a href="jewel.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="jewel.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Jewel</span> &#8212;<wbr></wbr> 3-<wbr></wbr>D Skill Game</a></td></tr><tr><td align="right">1.16&nbsp;</td><td><a href="parcheesi.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="parcheesi.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Parcheesi</span> &#8212;<wbr></wbr> Board Game</a></td></tr><tr><td align="right">1.17&nbsp;</td><td><a href="checkers.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="checkers.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Checkers</span> &#8212;<wbr></wbr> Board Game</a></td></tr><tr><td align="right">1.18&nbsp;</td><td><a href="chat-noir.html" class="tocviewselflink" data-pltdoc="x"><span class="noborder"><img src="chat-noir.png" alt="" width="40" height="19"/></span> <span class="ssansserif">Chat Noir</span> &#8212;<wbr></wbr> Puzzle Game</a></td></tr><tr><td align="right">1.19&nbsp;</td><td><a href="tally-maze.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="tally-maze.png" alt="" width="32" height="32"/></span> <span class="ssansserif">Tally Maze</span> &#8212;<wbr></wbr> Maze Enumeration Game</a></td></tr><tr><td align="right">1.20&nbsp;</td><td><a href="gcalc.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="gcalc.png" alt="" width="32" height="32"/></span> <span class="ssansserif">GCalc</span> &#8212;<wbr></wbr> Visual λ-<wbr></wbr>Calculus</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9660;</a></td><td>1.18&nbsp;</td><td><a href="chat-noir.html" class="tocviewlink" data-pltdoc="x"><span class="noborder"><img src="chat-noir.png" alt="" width="40" height="19"/></span> <span class="ssansserif">Chat Noir</span> &#8212;<wbr></wbr> Puzzle Game</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.18.1&nbsp;</td><td><a href="Overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">1.18.2&nbsp;</td><td><a href="The_World.html" class="tocviewlink" data-pltdoc="x">The World</a></td></tr><tr><td align="right">1.18.3&nbsp;</td><td><a href="Breadth-first_Search.html" class="tocviewlink" data-pltdoc="x">Breadth-<wbr></wbr>first Search</a></td></tr><tr><td align="right">1.18.4&nbsp;</td><td><a href="Board_to_Graph.html" class="tocviewlink" data-pltdoc="x">Board to Graph</a></td></tr><tr><td align="right">1.18.5&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">The Cat&rsquo;s Path</a></td></tr><tr><td align="right">1.18.6&nbsp;</td><td><a href="Drawing_the_Cat.html" class="tocviewlink" data-pltdoc="x">Drawing the Cat</a></td></tr><tr><td align="right">1.18.7&nbsp;</td><td><a href="Drawing_the_World.html" class="tocviewlink" data-pltdoc="x">Drawing the World</a></td></tr><tr><td align="right">1.18.8&nbsp;</td><td><a href="Handling_Input.html" class="tocviewlink" data-pltdoc="x">Handling Input</a></td></tr><tr><td align="right">1.18.9&nbsp;</td><td><a href="Tests.html" class="tocviewlink" data-pltdoc="x">Tests</a></td></tr><tr><td align="right">1.18.10&nbsp;</td><td><a href="Run__program__run.html" class="tocviewlink" data-pltdoc="x">Run, program, run</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">在本页中：</div><table class="tocsublist" cellspacing="0"><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3ccats-path~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;cats-path&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3ccats-path-tests~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;cats-path-tests&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3con-cats-path~3f-tests~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;on-cats-path?-tests&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3con-cats-path~3f~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;on-cats-path?&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3c%2B%2Ff~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;+/f&gt;</a></span></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="…搜索手册…" title="输入搜索字符串以搜索手册" onkeypress="return DoSearchKey(event, this, &quot;7.0.0.18&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;…搜索手册…&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;…搜索手册…&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="上至文档的顶层" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.0.0.18&quot;);">&#39030;&#23618;</a></span><span class="navright">&nbsp;&nbsp;<a href="Board_to_Graph.html" title="后退至&quot;1.18.4 Board to Graph&quot;" data-pltdoc="x">&larr; &#21069;&#19968;&#39029;</a>&nbsp;&nbsp;<a href="chat-noir.html" title="上至&quot;1.18  Chat Noir --- Puzzle Game&quot;" data-pltdoc="x">&#19978;&#19968;&#23618;</a>&nbsp;&nbsp;<a href="Drawing_the_Cat.html" title="前进至&quot;1.18.6 Drawing the Cat&quot;" data-pltdoc="x">&#21518;&#19968;&#39029; &rarr;</a></span>&nbsp;</div><h5 x-source-module="(lib &quot;games/scribblings/games.scrbl&quot;)" x-source-pkg="games" x-part-tag="&quot;The_Cat_s_Path&quot;">1.18.5<tt>&nbsp;</tt><a name="(part._.The_.Cat_s_.Path)"></a>The Cat&rsquo;s Path</h5><p>Once we have a breadth-first search all sorted out, we can use it to build a function that
determines where the shortest paths from the cat&rsquo;s current position to the boundary are.</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3ccats-path~3e~3a1))"></a><span style="font-weight: bold"><span style="font-family: 楷体"><a href="#%28elem._%28chunk._~3ccats-path~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;cats-path&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="#%28elem._%28chunk._~3con-cats-path~3f~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;on-cats-path?&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3c%2B%2Ff~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;+/f&gt;</a></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(chunk._~3ccats-path-tests~3e~3a1))"></a><span style="font-weight: bold"><span style="font-family: 楷体"><a href="#%28elem._%28chunk._~3ccats-path-tests~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;cats-path-tests&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="#%28elem._%28chunk._~3con-cats-path~3f-tests~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;on-cats-path?-tests&gt;</a></td></tr><tr><td><a href="Tests.html#%28elem._%28chunk._~3c%2B%2Ff-tests~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;+/f-tests&gt;</a></td></tr></table></blockquote></div></p><p>The function <span class="RktSym">on-cats-path?</span> accepts a world and returns a predicate
on the <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=htdp&amp;rel=index.html%23%2528def._%2528%2528lib._lang%252Fposn..rkt%2529._posn%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">posn</a></span>s in the world. The predicate indicates if the given
<span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=htdp&amp;rel=index.html%23%2528def._%2528%2528lib._lang%252Fposn..rkt%2529._posn%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">posn</a></span> is on the shortest path.</p><p>For example, in a world of size <span class="RktVal">7</span> with the cat at
<span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=htdp&amp;rel=index.html%23%2528def._%2528%2528lib._lang%252Fposn..rkt%2529._make-posn%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">make-posn</a></span><span class="stt"> </span><span class="RktVal">2</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span>, the circles with white centers
are on the shortest path to the boundary:</p><p><img src="cat-distance-example.png" alt="" width="326" height="269"/></p><p>So we can formulate two test cases using this world, one
in the white circles and one not:</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3con-cats-path~3f-tests~3e~3a1))"></a><span style="font-weight: bold"><span style="font-family: 楷体"><a href="#%28elem._%28chunk._~3con-cats-path~3f-tests~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;on-cats-path?-tests&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">on-the-path?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">on-cats-path?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-world</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-board</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=htdp&amp;rel=index.html%23%2528def._%2528%2528lib._lang%252Fposn..rkt%2529._make-posn%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">playing</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">7</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">on-the-path?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=htdp&amp;rel=index.html%23%2528def._%2528%2528lib._lang%252Fposn..rkt%2529._make-posn%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">on-the-path?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=htdp&amp;rel=index.html%23%2528def._%2528%2528lib._lang%252Fposn..rkt%2529._make-posn%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The computation of the shortest path to the boundary proceeds by computing
two distance maps; the distance map to the boundary and the distance map
to the cat. Then, a node is on one of the shortest paths if the distance
to the cat plus the distance to the boundary is equal to the distance from
the cat to the boundary.</p><p>The code is essentially that, plus two other special cases. Specifically if the
&ldquo;h&rdquo; key is not pressed down, then we just consider no cells to be on that shortest
path. And if the distance to the cat is <span class="RktVal">'</span><span class="RktVal">&#8734;</span>, then again no nodes are on the
path. The second situation happens when the cat is completely boxed in and has
lost the game.</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3con-cats-path~3f~3e~3a1))"></a><span style="font-weight: bold"><span style="font-family: 楷体"><a href="#%28elem._%28chunk._~3con-cats-path~3f~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;on-cats-path?&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=attaching-contracts-to-values.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fregion..rkt%2529._define%252Fcontract%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">define/contract</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">on-cats-path?</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">world?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=htdp&amp;rel=index.html%23%2528def._%2528%2528lib._lang%252Fposn..rkt%2529._posn%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">posn?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._cond%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">world-help?</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">edge-distance-map</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">build-bfs-table</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">boundary</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cat-distance-map</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">build-bfs-table</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-cat</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cat-distance</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-in-table</span><span class="hspace">&nbsp;</span><span class="RktSym">edge-distance-map</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">world-cat</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._cond%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cat-distance</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">&#8734;</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._else%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+/f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-in-table</span><span class="hspace">&nbsp;</span><span class="RktSym">cat-distance-map</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-in-table</span><span class="hspace">&nbsp;</span><span class="RktSym">edge-distance-map</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">cat-distance</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._else%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Finally, the helper function <span class="RktSym">+/f</span> is just like <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">+</a></span>, except that
it returns <span class="RktVal">'</span><span class="RktVal">&#8734;</span> if either argument is <span class="RktVal">'</span><span class="RktVal">&#8734;</span>.</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3c+/f~3e~3a1))"></a><span style="font-weight: bold"><span style="font-family: 楷体"><a href="#%28elem._%28chunk._~3c%2B%2Ff~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;+/f&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+/f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._cond%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._or%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">&#8734;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">&#8734;</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">&#8734;</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._else%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="…搜索手册…" title="输入搜索字符串以搜索手册" onkeypress="return DoSearchKey(event, this, &quot;7.0.0.18&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;…搜索手册…&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;…搜索手册…&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="上至文档的顶层" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.0.0.18&quot;);">&#39030;&#23618;</a></span><span class="navright">&nbsp;&nbsp;<a href="Board_to_Graph.html" title="后退至&quot;1.18.4 Board to Graph&quot;" data-pltdoc="x">&larr; &#21069;&#19968;&#39029;</a>&nbsp;&nbsp;<a href="chat-noir.html" title="上至&quot;1.18  Chat Noir --- Puzzle Game&quot;" data-pltdoc="x">&#19978;&#19968;&#23618;</a>&nbsp;&nbsp;<a href="Drawing_the_Cat.html" title="前进至&quot;1.18.6 Drawing the Cat&quot;" data-pltdoc="x">&#21518;&#19968;&#39029; &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>