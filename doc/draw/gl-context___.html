<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>14&nbsp;gl-context&lt;%&gt;</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">The Racket Drawing Toolkit</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="bitmap_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">bitmap%</span></span></a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="bitmap-dc_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">bitmap-<wbr></wbr>dc%</span></span></a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="brush_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">brush%</span></span></a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="brush-list_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">brush-<wbr></wbr>list%</span></span></a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="color_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">color%</span></span></a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="color-database___.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">color-<wbr></wbr>database&lt;%&gt;</span></span></a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="dc___.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">dc&lt;%&gt;</span></span></a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="dc-path_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">dc-<wbr></wbr>path%</span></span></a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="font_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">font%</span></span></a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="font-list_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">font-<wbr></wbr>list%</span></span></a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="font-name-directory___.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">font-<wbr></wbr>name-<wbr></wbr>directory&lt;%&gt;</span></span></a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="gl-config_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">gl-<wbr></wbr>config%</span></span></a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">gl-<wbr></wbr>context&lt;%&gt;</span></span></a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="linear-gradient_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">linear-<wbr></wbr>gradient%</span></span></a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="pdf-dc_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pdf-<wbr></wbr>dc%</span></span></a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="pen_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pen%</span></span></a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="pen-list_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pen-<wbr></wbr>list%</span></span></a></td></tr><tr><td align="right">19&nbsp;</td><td><a href="point_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">point%</span></span></a></td></tr><tr><td align="right">20&nbsp;</td><td><a href="post-script-dc_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">post-<wbr></wbr>script-<wbr></wbr>dc%</span></span></a></td></tr><tr><td align="right">21&nbsp;</td><td><a href="ps-setup_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">ps-<wbr></wbr>setup%</span></span></a></td></tr><tr><td align="right">22&nbsp;</td><td><a href="radial-gradient_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">radial-<wbr></wbr>gradient%</span></span></a></td></tr><tr><td align="right">23&nbsp;</td><td><a href="record-dc_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">record-<wbr></wbr>dc%</span></span></a></td></tr><tr><td align="right">24&nbsp;</td><td><a href="region_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">region%</span></span></a></td></tr><tr><td align="right">25&nbsp;</td><td><a href="svg-dc_.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">svg-<wbr></wbr>dc%</span></span></a></td></tr><tr><td align="right">26&nbsp;</td><td><a href="Drawing_Functions.html" class="tocviewlink" data-pltdoc="x">Drawing Functions</a></td></tr><tr><td align="right">27&nbsp;</td><td><a href="Drawing_Contracts.html" class="tocviewlink" data-pltdoc="x">Drawing Contracts</a></td></tr><tr><td align="right">28&nbsp;</td><td><a href="Signature_and_Unit.html" class="tocviewlink" data-pltdoc="x">Signature and Unit</a></td></tr><tr><td align="right">29&nbsp;</td><td><a href="unsafe.html" class="tocviewlink" data-pltdoc="x">Unsafe Libraries</a></td></tr><tr><td align="right">30&nbsp;</td><td><a href="Drawing_Conveniences.html" class="tocviewlink" data-pltdoc="x">Drawing Conveniences</a></td></tr><tr><td align="right">31&nbsp;</td><td><a href="libs.html" class="tocviewlink" data-pltdoc="x">Platform Dependencies</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" data-pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">在本页中：</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._call-as-current%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">call-<wbr></wbr>as-<wbr></wbr>current</span></span></a></td></tr><tr><td><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._get-handle%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>handle</span></span></a></td></tr><tr><td><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._ok~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">ok?</span></span></a></td></tr><tr><td><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._swap-buffers%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">swap-<wbr></wbr>buffers</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._racket%2Fdraw..rkt%29._get-current-gl-context%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>current-<wbr></wbr>gl-<wbr></wbr>context</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="…搜索手册…" title="输入搜索字符串以搜索手册" onkeypress="return DoSearchKey(event, this, &quot;7.0.0.18&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;…搜索手册…&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;…搜索手册…&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="上至文档的顶层" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.0.0.18&quot;);">&#39030;&#23618;</a></span><span class="navright">&nbsp;&nbsp;<a href="gl-config_.html" title="后退至&quot;13 gl-config%&quot;" data-pltdoc="x">&larr; &#21069;&#19968;&#39029;</a>&nbsp;&nbsp;<a href="index.html" title="上至&quot;The Racket Drawing Toolkit&quot;" data-pltdoc="x">&#19978;&#19968;&#23618;</a>&nbsp;&nbsp;<a href="linear-gradient_.html" title="前进至&quot;15 linear-gradient%&quot;" data-pltdoc="x">&#21518;&#19968;&#39029; &rarr;</a></span>&nbsp;</div><a name="(part._gl-context___)"></a><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>interface</p></div></div><p class="RForeground"><a name="(def._((lib._racket/draw..rkt)._gl-context~3c~25~3e))"></a><span title="提供自：racket/draw | 包：draw-lib"><span class="RktSym"><a href="" class="RktValDef RktValLink" data-pltdoc="x">gl-context&lt;%&gt;</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=objectutils.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._interface%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">interface?</a></span></p></blockquote></td></tr></table></div><div class="SIntrapara">A <span class="RktSym"><a href="" class="RktValLink" data-pltdoc="x">gl-context&lt;%&gt;</a></span> object represents a context for drawing with
 <a name="(idx._(gentag._60._(lib._scribblings/draw/draw..scrbl)))"></a>OpenGL to a specific <span class="RktSym"><a href="dc___.html" class="RktValLink" data-pltdoc="x">dc&lt;%&gt;</a></span> instance. To obtain a
 <span class="RktSym"><a href="" class="RktValLink" data-pltdoc="x">gl-context&lt;%&gt;</a></span> object, call <span class="RktSym"><a href="dc___.html#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._dc~3c~25~3e%29._get-gl-context%29%29" class="RktValLink" data-pltdoc="x">get-gl-context</a></span> of
 the target drawing context.</div></p><p>Only canvas <span class="RktSym"><a href="dc___.html" class="RktValLink" data-pltdoc="x">dc&lt;%&gt;</a></span> and <span class="RktSym"><a href="bitmap-dc_.html" class="RktValLink" data-pltdoc="x">bitmap-dc%</a></span> objects containing
 a bitmap from <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=gui&amp;rel=Windowing_Functions.html%23%2528def._%2528%2528lib._mred%252Fmain..rkt%2529._make-gl-bitmap%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">make-gl-bitmap</a></span> support OpenGL (always on
 Windows and Mac OS, sometimes on Unix).  Normal <span class="RktSym"><a href="dc___.html" class="RktValLink" data-pltdoc="x">dc&lt;%&gt;</a></span>
 drawing and OpenGL drawing can be mixed in a <span class="RktSym"><a href="bitmap-dc_.html" class="RktValLink" data-pltdoc="x">bitmap-dc%</a></span>, but
 a canvas that uses the <span class="RktVal">'</span><span class="RktVal">gl</span> style to support OpenGL does not
 reliably support normal <span class="RktSym"><a href="dc___.html" class="RktValLink" data-pltdoc="x">dc&lt;%&gt;</a></span> drawing; use a bitmap if you
 need to mix drawing modes, and use a canvas to maximize OpenGL
 performance.</p><p>When the target bitmap for a <span class="RktSym"><a href="bitmap-dc_.html" class="RktValLink" data-pltdoc="x">bitmap-dc%</a></span> context is changed
 via <span class="RktSym"><a href="bitmap-dc_.html#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._bitmap-dc~25%29._set-bitmap%29%29" class="RktValLink" data-pltdoc="x">set-bitmap</a></span>, the associated
 <span class="RktSym"><a href="" class="RktValLink" data-pltdoc="x">gl-context&lt;%&gt;</a></span> changes. Canvas contexts are normally double
 buffered, and bitmap contexts are single buffered.</p><p>The <a href="http://docs.racket-lang.org/local-redirect/index.html?doc=gui&amp;rel=index.html&amp;version=7.0.0.18" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/gui/base</span></a> library provides no OpenGL
 routines. Instead, they must be obtained from a separate library,
 such as <a href="http://docs.racket-lang.org/local-redirect/index.html?tag=%28mod-path._.%27sgl.%27%29&amp;version=7.0.0.18" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">sgl</span></a>. The facilities in
 <a href="http://docs.racket-lang.org/local-redirect/index.html?doc=gui&amp;rel=index.html&amp;version=7.0.0.18" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/gui/base</span></a> merely manage the current OpenGL
 context, connecting it to windows and bitmaps.</p><p>Only one OpenGL context can be active at a time across all threads and
 eventspaces. OpenGL contexts are not protected
 against interference among threads; that is, if a thread selects one
 of its OpenGL contexts, then other threads can write into the context
 via OpenGL commands. However, if all threads issue OpenGL commands
 only within a thunk passed to <span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._call-as-current%29%29" class="RktValLink" data-pltdoc="x">call-as-current</a></span>,
 then drawing from the separate threads will not interfere, because
 <span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._call-as-current%29%29" class="RktValLink" data-pltdoc="x">call-as-current</a></span> uses a lock to serialize
 context selection across all threads in Racket.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#26041;&#27861;</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-gl-context</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._racket/draw..rkt)._gl-context~3c~25~3e)._call-as-current))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._call-as-current%29%29" class="RktValDef RktValLink" data-pltdoc="x">call-as-current</a></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">thunk</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktVar">alternate</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">enable-breaks?</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">alternate</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._evt%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">evt?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._never-evt%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">never-evt</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">enable-breaks?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Calls a thunk with this OpenGL context as the current context for
 OpenGL commands.</div></p><p>The method blocks to obtain a lock that protects the global OpenGL
 context, and it releases the lock when the thunk returns or
 escapes. The lock is re-entrant, so a nested use of the method in the
 same thread with the same OpenGL context does not obtain or release
 the lock.</p><p>The lock prevents interference among OpenGL-using threads.  If a
 thread is terminated while holding the context lock, the lock is
 released. Continuation jumps into the thunk do not grab the lock or
 set the OpenGL context. See <span class="RktSym"><a href="" class="RktValLink" data-pltdoc="x">gl-context&lt;%&gt;</a></span> for more
 information on interference.</p><p>The method accepts an alternate <a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528tech._synchronizable._event%2529&amp;version=7.0.0.18" class="techoutside Sq" data-pltdoc="x"><span class="techinside">synchronizable event</span></a> for use while blocking for the
 context lock; see also <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._sync%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">sync</a></span>.</p><p>The result of the method call is the result of the thunk if it is
 called, or the result of the alternate event if it is chosen instead
 of the context lock.</p><p>If <span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._ok~3f%29%29" class="RktValLink" data-pltdoc="x">ok?</a></span> returns <span class="RktVal">#f</span> at the time that
 this method is called, then an <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%7E3afail%7E3acontract%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p>If <span class="RktVar">enable-breaks?</span> is true, then the method uses
 <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._sync%252Fenable-break%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">sync/enable-break</a></span> while blocking for the context-setting
 lock instead of <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._sync%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">sync</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#26041;&#27861;</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-gl-context</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._racket/draw..rkt)._gl-context~3c~25~3e)._get-handle))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._get-handle%29%29" class="RktValDef RktValLink" data-pltdoc="x">get-handle</a></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=foreign&amp;rel=foreign_pointer-funcs.html%23%2528def._%2528%2528quote._%7E23%7E25foreign%2529._cpointer%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">cpointer?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns a handle to the platform&rsquo;s underlying context. The value that the
pointer represents depends on the platform:</div></p><ul><li><p>Windows: <span class="stt">HGLRC</span></p></li><li><p>Mac OS: <span class="stt">NSOpenGLContext</span></p></li><li><p>Unix: <span class="stt">GLXContext</span></p></li></ul><p>Note that these values are not necessary the most &ldquo;low-level&rdquo; context objects,
but are instead the ones useful to Racket. For example, a <span class="stt">NSOpenGLContext</span>
wraps a <span class="stt">CGLContextObj</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#26041;&#27861;</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-gl-context</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._racket/draw..rkt)._gl-context~3c~25~3e)._ok~3f))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._ok~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">ok?</a></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if this context is available OpenGL drawing,
 <span class="RktVal">#f</span> otherwise.</div></p><p>A context is unavailable if OpenGL support is disabled at compile time
 or run time, if the context is associated with a
 <span class="RktSym"><a href="bitmap-dc_.html" class="RktValLink" data-pltdoc="x">bitmap-dc%</a></span> with no selected bitmap or with a monochrome
 selected bitmap, if the context is for a canvas that no longer
 exists, or if there was a low-level error when preparing the context.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#26041;&#27861;</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-gl-context</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._racket/draw..rkt)._gl-context~3c~25~3e)._swap-buffers))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._swap-buffers%29%29" class="RktValDef RktValLink" data-pltdoc="x">swap-buffers</a></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Swaps the front (visible) and back (OpenGL-drawing) buffer for a
 context associated with a canvas, and has no effect on a bitmap
 context.</div></p><p><div class="SIntrapara">This method implicitly uses <span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._call-as-current%29%29" class="RktValLink" data-pltdoc="x">call-as-current</a></span> to
 obtain the context lock. Since the lock is re-entrant, however, the
 <span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._swap-buffers%29%29" class="RktValLink" data-pltdoc="x">swap-buffers</a></span> method can be safely used within
 a <span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._call-as-current%29%29" class="RktValLink" data-pltdoc="x">call-as-current</a></span> thunk.
</div><div class="SIntrapara"></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racket/draw..rkt)._get-current-gl-context))"></a><span title="提供自：racket/draw | 包：draw-lib"><span class="RktSym"><a href="#%28def._%28%28lib._racket%2Fdraw..rkt%29._get-current-gl-context%29%29" class="RktValDef RktValLink" data-pltdoc="x">get-current-gl-context</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="" class="RktValLink" data-pltdoc="x">gl-context&lt;%&gt;</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">If within the dynamic extent of a <span class="RktSym"><a href="#%28meth._%28%28%28lib._racket%2Fdraw..rkt%29._gl-context~3c~25~3e%29._call-as-current%29%29" class="RktValLink" data-pltdoc="x">call-as-current</a></span>
method call, returns the current context; otherwise returns <span class="RktVal">#f</span>.
This is possibly most useful for caching context-dependent state or data,
such as extension strings. Create such caches using <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-weak-hasheq%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">make-weak-hasheq</a></span>.</div></p><p class="SHistory">&#28155;&#21152;&#20110;package <span class="stt">draw-lib</span>&#30340;1.3&#29256;&#26412;&#12290;</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="…搜索手册…" title="输入搜索字符串以搜索手册" onkeypress="return DoSearchKey(event, this, &quot;7.0.0.18&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;…搜索手册…&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;…搜索手册…&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="上至文档的顶层" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.0.0.18&quot;);">&#39030;&#23618;</a></span><span class="navright">&nbsp;&nbsp;<a href="gl-config_.html" title="后退至&quot;13 gl-config%&quot;" data-pltdoc="x">&larr; &#21069;&#19968;&#39029;</a>&nbsp;&nbsp;<a href="index.html" title="上至&quot;The Racket Drawing Toolkit&quot;" data-pltdoc="x">&#19978;&#19968;&#23618;</a>&nbsp;&nbsp;<a href="linear-gradient_.html" title="前进至&quot;15 linear-gradient%&quot;" data-pltdoc="x">&#21518;&#19968;&#39029; &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>