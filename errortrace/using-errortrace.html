<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;Using Errortrace</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Errortrace:<span class="mywbr"> &nbsp;</span> Debugging and Profiling</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="quick-instructions.html" class="tocviewlink" data-pltdoc="x">Quick Instructions</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="installing-errortrace.html" class="tocviewlink" data-pltdoc="x">Installing Errortrace</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Using Errortrace</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="errortrace-library.html" class="tocviewlink" data-pltdoc="x">Errortrace Library</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="stacktrace.html" class="tocviewlink" data-pltdoc="x">Re-<wbr></wbr>using Errortrace Stack Tracing</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Errortrace_Key.html" class="tocviewlink" data-pltdoc="x">Errortrace Key</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Using Errortrace</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._instrumentation-and-profiling%29" class="tocviewlink" data-pltdoc="x">Instrumentation and Profiling</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._coverage%29" class="tocviewlink" data-pltdoc="x">Coverage</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="#%28part._other-errortrace-bindings%29" class="tocviewlink" data-pltdoc="x">Other Errortrace Bindings</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">在本页中：</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._instrumentation-and-profiling%29" class="tocsubseclink" data-pltdoc="x">Instrumentation and Profiling</a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._instrumenting-enabled%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">instrumenting-<wbr></wbr>enabled</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._profiling-enabled%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">profiling-<wbr></wbr>enabled</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._profiling-record-enabled%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">profiling-<wbr></wbr>record-<wbr></wbr>enabled</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._output-profile-results%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">output-<wbr></wbr>profile-<wbr></wbr>results</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._get-profile-results%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>profile-<wbr></wbr>results</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._profile-paths-enabled%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">profile-<wbr></wbr>paths-<wbr></wbr>enabled</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._clear-profile-results%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">clear-<wbr></wbr>profile-<wbr></wbr>results</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._coverage%29" class="tocsubseclink" data-pltdoc="x">Coverage</a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._coverage-counts-enabled%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">coverage-<wbr></wbr>counts-<wbr></wbr>enabled</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._execute-counts-enabled%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">execute-<wbr></wbr>counts-<wbr></wbr>enabled</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._get-coverage%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>coverage</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._get-execute-counts%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>execute-<wbr></wbr>counts</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._annotate-covered-file%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">annotate-<wbr></wbr>covered-<wbr></wbr>file</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._annotate-executed-file%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">annotate-<wbr></wbr>executed-<wbr></wbr>file</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._test-coverage-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">test-<wbr></wbr>coverage-<wbr></wbr>info</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._other-errortrace-bindings%29" class="tocsubseclink" data-pltdoc="x">Other Errortrace Bindings</a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._print-error-trace%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">print-<wbr></wbr>error-<wbr></wbr>trace</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._error-context-display-depth%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">error-<wbr></wbr>context-<wbr></wbr>display-<wbr></wbr>depth</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="…搜索手册…" title="输入搜索字符串以搜索手册" onkeypress="return DoSearchKey(event, this, &quot;7.0.0.18&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;…搜索手册…&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;…搜索手册…&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="上至文档的顶层" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.0.0.18&quot;);">&#39030;&#23618;</a></span><span class="navright">&nbsp;&nbsp;<a href="installing-errortrace.html" title="后退至&quot;2 Installing Errortrace&quot;" data-pltdoc="x">&larr; &#21069;&#19968;&#39029;</a>&nbsp;&nbsp;<a href="index.html" title="上至&quot;Errortrace: Debugging and Profiling&quot;" data-pltdoc="x">&#19978;&#19968;&#23618;</a>&nbsp;&nbsp;<a href="errortrace-library.html" title="前进至&quot;4 Errortrace Library&quot;" data-pltdoc="x">&#21518;&#19968;&#39029; &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;errortrace/scribblings/errortrace.scrbl&quot;)" x-source-pkg="errortrace-doc" x-part-tag="&quot;using-errortrace&quot;">3<tt>&nbsp;</tt><a name="(part._using-errortrace)"></a><a name="(mod-path._errortrace)"></a>Using Errortrace</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package&#65306;</span> <a href="https://pkgs.racket-lang.org/package/errortrace-lib" title="使用“raco pkg install errortrace-lib”安装此包"><span class="stt">errortrace-lib</span></a></span></td></tr></table></p><p>See <a href="quick-instructions.html" data-pltdoc="x">Quick Instructions</a> for information on starting with
<a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a>. This chapter provides information on the
configuration of <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a> after it is loaded and
installed.</p><p>Don&rsquo;t import <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a> into another module and expect
it to work on that module. Instead, the <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a>
module is meant to be invoked from the top-level (as described in
<a href="quick-instructions.html" data-pltdoc="x">Quick Instructions</a>) so it can install handlers. The
functions documented in this chapter then can be used at the
top-level. The functions also can be accessed by importing
<a href="errortrace-library.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace/errortrace-lib</span></a>, which does not install any
handlers.</p><p>As a language name, <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a> chains to another
language that is specified immediately after <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a>,
but instruments the module for debugging in the same way as if
<a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a> is required before loading the module from
source. Using the <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a> meta-language is one way
to ensure that debugging instrumentation is present when the module is
compiled.</p><h4 x-source-module="(lib &quot;errortrace/scribblings/errortrace.scrbl&quot;)" x-source-pkg="errortrace-doc" x-part-tag="&quot;instrumentation-and-profiling&quot;">3.1<tt>&nbsp;</tt><a name="(part._instrumentation-and-profiling)"></a>Instrumentation and Profiling</h4><p>By default, <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a> only instruments for
stack-trace-on-exception. Profiling and coverage need to be enabled
separately.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._instrumenting-enabled))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._instrumenting-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">instrumenting-enabled</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._instrumenting-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">instrumenting-enabled</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">on?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A parameter that determines whether tracing instrumentation is
enabled, <span class="RktVal">#t</span> by default.  Affects only the way that source code is
compiled, not the way that exception information is reported. The
instrumentation for storing exception information slows most programs
by a factor of 2 or 3.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._profiling-enabled))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._profiling-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">profiling-enabled</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._profiling-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">profiling-enabled</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">on?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Errortrace&rsquo;s profiling instrumentation is <span class="RktVal">#f</span> by default. To use it,
you also need to ensure that <span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._instrumenting-enabled%29%29" class="RktValLink" data-pltdoc="x">instrumenting-enabled</a></span> is on.</div></p><p>Also, profiling only records information about the time taken on the thread
that compiled the code (more precisely, the thread that instruments the code via
the <span class="RktSym"><a href="errortrace-library.html#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._errortrace-compile-handler%29%29" class="RktValLink" data-pltdoc="x">errortrace-compile-handler</a></span>).</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._profiling-record-enabled))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._profiling-record-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">profiling-record-enabled</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._profiling-record-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">profiling-record-enabled</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">on?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Enables/disables the recording of profiling info for the instrumented code.
The default is <span class="RktVal">#t</span>.</div></p><p>Profiling information is accumulated in a hash table.  If a procedure
is redefined, new profiling information is accumulated for the new
version of the procedure, but the old information is also preserved.</p><p>Depending of the source program, profiling usually induces a factor of
2 to 4 slowdown, in addition to any slowdown from the
exception-information instrumentation.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._output-profile-results))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._output-profile-results%29%29" class="RktValDef RktValLink" data-pltdoc="x">output-profile-results</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">paths?</span><span class="hspace">&nbsp;</span><span class="RktVar">sort-time?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">paths?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">sort-time?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Gets the current profile results using <span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._get-profile-results%29%29" class="RktValLink" data-pltdoc="x">get-profile-results</a></span> and
displays them.  It optionally shows paths information (if it is recorded),
and sorts by either time or call counts.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._get-profile-results))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._get-profile-results%29%29" class="RktValDef RktValLink" data-pltdoc="x">get-profile-results</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">thd</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">list?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._thread%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">thread?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-thread%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">current-thread</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a list of lists that contain all profiling information accumulated
so far (for the thread <span class="RktVar">thd</span>):</div></p><ul><li><p>the number of times a procedure was called.</p></li><li><p>the number of milliseconds consumed by the procedure&rsquo;s body across
all calls (including the time consumed by any nested non-tail call
within the procedure, but not including time consumed by a
tail-call from the procedure).</p></li><li><p>an inferred name (or <span class="RktVal">#f</span>) for the procedure.</p></li><li><p>the procedure&rsquo;s source in the form of a syntax object (which might,
in turn, provide a source location file and position).</p></li><li><p><div class="SIntrapara">optionally, a list of unique call paths (i.e. stack traces)
 recorded if <span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._profile-paths-enabled%29%29" class="RktValLink" data-pltdoc="x">profile-paths-enabled</a></span> is set to <span class="RktVal">#t</span>.
 Each call path is a pair of
 </div><div class="SIntrapara"><ul><li><p>a count (the number of times the path occurred), and</p></li><li><p><div class="SIntrapara">a list containing two-element lists. Each two-element list
contains
</div><div class="SIntrapara"><ul><li><p>the calling procedure&rsquo;s name or source expression,
and</p></li><li><p>the calling procedure&rsquo;s source file or <span class="RktVal">#f</span>.</p></li></ul></div></p></li></ul></div><div class="SIntrapara">Collecting this information is relatively expensive.</div></p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._profile-paths-enabled))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._profile-paths-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">profile-paths-enabled</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._profile-paths-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">profile-paths-enabled</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">on?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Enables/disables collecting path information for profiling. The default is
<span class="RktVal">#f</span>, but setting the parameter to <span class="RktVal">#t</span> immediately affects
all procedures instrumented for profiling information.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._clear-profile-results))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._clear-profile-results%29%29" class="RktValDef RktValLink" data-pltdoc="x">clear-profile-results</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Clears accumulated profile results for the current thread.</div></p><h4 x-source-module="(lib &quot;errortrace/scribblings/errortrace.scrbl&quot;)" x-source-pkg="errortrace-doc" x-part-tag="&quot;coverage&quot;">3.2<tt>&nbsp;</tt><a name="(part._coverage)"></a>Coverage</h4><p>Errortrace can produce coverage information in two flavors: both count
the number of times each expression in the source was used during
execution. The first flavor uses a simple approach, where each
expression is counted when executed; the second one uses the same
annotations that the profiler uses, so only function bodies are
counted. To see the difference between the two approaches, try this
program:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">foo</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.0.0.18" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">foo</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The first approach will produce exact results, but it is more
expensive; use it when you want to know how covered your code is (when
the expected counts are small).  The second approach produces coarser
results (which, in the above case, will miss the <span class="RktVal">2</span> expression),
but is less expensive; use it when you want to use the counts for
profiling (when the expected counts are large).</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._coverage-counts-enabled))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._coverage-counts-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">coverage-counts-enabled</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._coverage-counts-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">coverage-counts-enabled</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">on?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._execute-counts-enabled))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._execute-counts-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">execute-counts-enabled</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._execute-counts-enabled%29%29" class="RktValDef RktValLink" data-pltdoc="x">execute-counts-enabled</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">on?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Parameters that determine if the first (exact coverage) or second
(profiler-based coverage) are enabled. Remember that setting
<span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._instrumenting-enabled%29%29" class="RktValLink" data-pltdoc="x">instrumenting-enabled</a></span> to <span class="RktVal">#f</span> also disables both.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._get-coverage))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._get-coverage%29%29" class="RktValDef RktValLink" data-pltdoc="x">get-coverage</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns a list of pairs, one for each instrumented expression.  The
first element of the pair is a <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span> object (usually containing
source location information) for the original expression, and the
second element of the pair indicates if the code has been executed.
This list is snapshot of the current state of the computation.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._get-execute-counts))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._get-execute-counts%29%29" class="RktValDef RktValLink" data-pltdoc="x">get-execute-counts</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">number?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns a list of pairs, one for each instrumented expression.  The
first element of the pair is a <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span> object (usually containing
source location information) for the original expression, and the
second element of the pair is the number of times that the
expression has been evaluated.
This list is snapshot of the current state of the computation.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._annotate-covered-file))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._annotate-covered-file%29%29" class="RktValDef RktValLink" data-pltdoc="x">annotate-covered-file</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">filename-path</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktVar">display-string</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">filename-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">display-string</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._annotate-executed-file))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._annotate-executed-file%29%29" class="RktValDef RktValLink" data-pltdoc="x">annotate-executed-file</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">filename-path</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktVar">display-string</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">filename-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">display-string</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">"^.,"</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Writes the named file to the <span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-output-port%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">current-output-port</a></span>, inserting an
additional line between each source line to reflect execution counts
(as reported by <span class="RktSym">get-coverage-counts</span> or <span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._get-execute-counts%29%29" class="RktValLink" data-pltdoc="x">get-execute-counts</a></span>).
The optional <span class="RktVar">display-string</span> is used for the annotation: the first
character is used for expressions that were visited 0 times, the
second character for 1 time, ..., and the last character for
expressions that were visited more times.  It can also be
<span class="RktVal">#f</span> for a minimal display, <span class="RktVal">"#."</span>, or, in
the case of <span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._annotate-executed-file%29%29" class="RktValLink" data-pltdoc="x">annotate-executed-file</a></span>,
<span class="RktVal">#t</span> for a maximal display, <span class="RktVal">"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._test-coverage-info))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._test-coverage-info%29%29" class="RktValDef RktValLink" data-pltdoc="x">test-coverage-info</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">hasheq?</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._test-coverage-info%29%29" class="RktValDef RktValLink" data-pltdoc="x">test-coverage-info</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">ht</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ht</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">hasheq?</span></td></tr></table></blockquote></div><div class="SIntrapara">The hash-table in this parameter is used to store the profile results.</div></p><h4 x-source-module="(lib &quot;errortrace/scribblings/errortrace.scrbl&quot;)" x-source-pkg="errortrace-doc" x-part-tag="&quot;other-errortrace-bindings&quot;">3.3<tt>&nbsp;</tt><a name="(part._other-errortrace-bindings)"></a>Other Errortrace Bindings</h4><p>The <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">errortrace</span></a> module also exports:</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>&#20989;&#25968;</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._print-error-trace))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._print-error-trace%29%29" class="RktValDef RktValLink" data-pltdoc="x">print-error-trace</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">output-port</span><span class="hspace">&nbsp;</span><span class="RktVar">exn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">output-port</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._output-port%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">output-port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">exn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exn%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">exn?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">The <span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._print-error-trace%29%29" class="RktValLink" data-pltdoc="x">print-error-trace</a></span> procedure takes a port and exception and
prints the Errortrace-collected debugging information contained in the
exception. It is used by the exception handler installed by
Errortrace.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._errortrace/errortrace-lib..rkt)._error-context-display-depth))"></a><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._error-context-display-depth%29%29" class="RktValDef RktValLink" data-pltdoc="x">error-context-display-depth</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._integer%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">integer?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="提供自：errortrace | 包：errortrace-lib"><span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._error-context-display-depth%29%29" class="RktValDef RktValLink" data-pltdoc="x">error-context-display-depth</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">d</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._integer%7E3f%2529%2529&amp;version=7.0.0.18" class="RktValLink Sq" data-pltdoc="x">integer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">The
<span class="RktSym"><a href="#%28def._%28%28lib._errortrace%2Ferrortrace-lib..rkt%29._error-context-display-depth%29%29" class="RktValLink" data-pltdoc="x">error-context-display-depth</a></span> parameter controls how much context
Errortrace&rsquo;s exception handler displays. The default value is 10,000.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="…搜索手册…" title="输入搜索字符串以搜索手册" onkeypress="return DoSearchKey(event, this, &quot;7.0.0.18&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;…搜索手册…&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;…搜索手册…&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="上至文档的顶层" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.0.0.18&quot;);">&#39030;&#23618;</a></span><span class="navright">&nbsp;&nbsp;<a href="installing-errortrace.html" title="后退至&quot;2 Installing Errortrace&quot;" data-pltdoc="x">&larr; &#21069;&#19968;&#39029;</a>&nbsp;&nbsp;<a href="index.html" title="上至&quot;Errortrace: Debugging and Profiling&quot;" data-pltdoc="x">&#19978;&#19968;&#23618;</a>&nbsp;&nbsp;<a href="errortrace-library.html" title="前进至&quot;4 Errortrace Library&quot;" data-pltdoc="x">&#21518;&#19968;&#39029; &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>